@model web.Areas.Client.Models.Content.ContentViewModel

<div class="card mb-4">
	<div class="card-header">
		<h3 class="card-title">Chủ đề</h3>
	</div>
	<div class="list-group list-group-flush">
		<a href="@Url.Action("Index")" class="list-group-item list-group-item-action d-flex align-items-center @(string.IsNullOrEmpty(Model.CategorySlug) && !Model.SelectedCategoryIds.Any() ? "active" : "")">
			<span class="avatar avatar-xs bg-primary-lt me-3">T</span>
			<div class="flex-fill">Tất cả</div>
			<span class="badge bg-primary-lt ms-auto">@Model.TotalContents</span>
		</a>
		@foreach (var category in Model.ParentCategories)
		{
			<a href="@Url.Action("Index", new { category = category.Slug })"
			   class="list-group-item list-group-item-action d-flex align-items-center @(Model.CategorySlug == category.Slug || Model.SelectedCategoryIds.Contains(category.Id) ? "active" : "")">
				<span class="avatar avatar-xs bg-primary-lt me-3">@(category.Name.Length > 0 ? category.Name[0] : 'C')</span>
				<div class="flex-fill">@category.Name</div>
				<span class="badge bg-primary-lt ms-auto">
					@Model.Contents.Count(c => c.ContentCategories != null && c.ContentCategories.Any(cc => cc.CategoryId == category.Id))
				</span>
			</a>

			@foreach (var childCategory in Model.ChildCategories.Where(c => c.ParentCategoryId == category.Id))
			{
				<a href="@Url.Action("Index", new { category = childCategory.Slug })"
				   class="list-group-item list-group-item-action d-flex align-items-center ps-5 @(Model.CategorySlug == childCategory.Slug || Model.SelectedCategoryIds.Contains(childCategory.Id) ? "active" : "")">
					<span class="avatar avatar-xs bg-secondary-lt me-3">@(childCategory.Name.Length > 0 ? childCategory.Name[0] : 'C')</span>
					<div class="flex-fill">@childCategory.Name</div>
					<span class="badge bg-secondary-lt ms-auto">
						@Model.Contents.Count(c => c.ContentCategories != null && c.ContentCategories.Any(cc => cc.CategoryId == childCategory.Id))
					</span>
				</a>
			}
		}
	</div>
</div>

<div class="card mb-4">
	<div class="card-header">
		<h3 class="card-title">Thẻ phổ biến</h3>
	</div>
	<div class="card-body">
		<div class="d-flex flex-wrap gap-2">
			@foreach (var tag in Model.Tags.Take(15))
			{
				<a href="@Url.Action("Index", new { tag = tag.Slug })"
				   class="badge @(Model.TagSlug == tag.Slug || Model.SelectedTagIds.Contains(tag.Id) ? "bg-azure" : "bg-azure-lt")">
					#@tag.Name
				</a>
			}
		</div>
	</div>
</div>