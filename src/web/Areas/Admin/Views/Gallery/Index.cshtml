@using web.Areas.Admin.Models.Gallery
@model GalleryViewModel;

@{
    const string title = "Thư viện";
    const string screenCode = "gallery";
    ViewData["Title"] = title;
}

@section HeadScripts {
    <style>
        /* Gallery Styles */

        /* Folder Tree */
        .folder-tree {
            font-size: 0.875rem;
        }

        .folder-tree-list {
            list-style: none;
            padding: 0;
            margin: 0;
        }

        .folder-tree-item {
            margin-bottom: 0.25rem;
        }

            .folder-tree-item.active > div > .folder-tree-link {
                font-weight: bold;
                color: var(--tblr-primary);
            }

        .folder-tree-children {
            list-style: none;
            padding-left: 1.5rem;
            margin-top: 0.25rem;
            display: none;
        }

        .folder-tree-item.expanded > .folder-tree-children {
            display: block;
        }

        .folder-tree-link {
            color: var(--tblr-body-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            padding: 0.375rem 0.5rem;
            border-radius: 4px;
        }

            .folder-tree-link:hover {
                background-color: rgba(var(--tblr-primary-rgb), 0.1);
            }

            .folder-tree-link .icon {
                margin-right: 0.5rem;
                color: var(--tblr-primary);
            }

        .folder-tree-toggle {
            color: var(--tblr-body-color);
            text-decoration: none;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .folder-tree-icon {
            transition: transform 0.2s;
        }

        .rotate-90 {
            transform: rotate(90deg);
        }
    </style>
}

<div class="screen @screenCode">
    <section class="page-header d-print-none mb-3">
        <div class="container">
            <div class="row g-2 align-items-center">
                <div class="col page-title">
                    @title
                </div>
                <div class="col-auto ms-auto">
                    <div class="btn-list">
                        <button type="button" class="btn btn-primary command-modal-create" data-bs-toggle="modal" data-bs-target="#modal-new-folder" asp-area="Admin"
                                asp-controller="Gallery" asp-action="CreateFolder">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-folder-plus" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M5 4h4l3 3h7a2 2 0 0 1 2 2v8a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-11a2 2 0 0 1 2 -2"></path>
                                <path d="M12 10l0 6"></path>
                                <path d="M9 13l6 0"></path>
                            </svg>
                            Thêm thư mục
                        </button>
                        <button type="button" class="btn btn-primary command-modal-create" data-bs-toggle="modal" data-bs-target="#modal-upload-file" asp-area="Admin"
                                asp-controller="Gallery" asp-action="CreateFile">
                            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-upload" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round">
                                <path stroke="none" d="M0 0h24v24H0z" fill="none"></path>
                                <path d="M4 17v2a2 2 0 0 0 2 2h12a2 2 0 0 0 2 -2v-2"></path>
                                <path d="M7 9l5 -5l5 5"></path>
                                <path d="M12 4l0 12"></path>
                            </svg>
                            Tải lên tệp
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section class="dm-form form-create-container"></section>
    <section class="dm-form form-details-container"></section>
    <section class="dm-form form-edit-container"></section>
    <section class="dm-form form-delete-container"></section>

    <section class="paged-list">
        <partial name="_List" model="Model" />
    </section>

</div>

@section FootScripts {
    <script>
        $(document).ready(function () {
             $('.folder-tree-toggle').on('click', function(e) {
                e.preventDefault();
                $(this).closest('.folder-tree-item').toggleClass('expanded');
                $(this).find('.folder-tree-icon').toggleClass('rotate-90');
            });

            window.copyToClipboard = function(text) {
                if (navigator.clipboard && navigator.clipboard.writeText) {
                    navigator.clipboard.writeText(text)
                        .then(function() {
                            jqueryDaiminh.Notification.show( 'success', 'Đã sao chép đường dẫn');
                        })
                        .catch(function(err) {
                            jqueryDaiminh.Notification.show( 'error', err);
                        });
                }
            };
        });
    </script>
}