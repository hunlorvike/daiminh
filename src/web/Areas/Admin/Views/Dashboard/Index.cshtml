@{
	ViewData["Title"] = "Dashboard Tổng Quan - Hệ thống quản trị";
	ViewData["PageTitle"] = "Dashboard Tổng Quan";
	ViewData[TempDataConstants.Breadcrumbs] = new List<(string Text, string Url)> {
		("Dashboard", "") // Không có URL vì đây là trang hiện tại
    };
}

@section Styles {
	<!-- Có thể thêm CSS tùy chỉnh cho dashboard nếu cần -->
	<style>
		.kpi-card .apexcharts-sparkline {
			min-height: 50px !important; /* Đảm bảo sparkline có chiều cao tối thiểu */
		}

		.kpi-value {
			font-size: 2rem;
			font-weight: bold;
		}

		.kpi-trend {
			font-size: 0.9rem;
		}

			.kpi-trend.positive {
				color: var(--tblr-green);
			}

			.kpi-trend.negative {
				color: var(--tblr-red);
			}
	</style>
}

<!-- I. TỔNG QUAN & KPI CHÍNH -->
<div class="row mb-3 align-items-center">
	<div class="col-md-auto ms-auto">
		<div class="form-group">
			<label class="form-label">Chọn khoảng thời gian:</label>
			<input type="text" class="form-control" id="dashboardDateRangePicker" placeholder="Chọn ngày..." />
		</div>
	</div>
</div>

<div class="row row-cards mb-3">
	<!-- 2. Các Thẻ KPI Chính -->
	<div class="col-sm-6 col-lg-3">
		<div class="card kpi-card">
			<div class="card-body">
				<div class="d-flex align-items-center">
					<div class="subheader">Số Bài Viết Mới</div>
				</div>
				<div class="d-flex align-items-baseline">
					<div class="h1 mb-0 me-2 kpi-value" id="kpiNewArticlesCount">--</div>
					<div class="ms-auto">
						<span class="text-muted kpi-trend" id="kpiNewArticlesTrend">
							<!-- (+10% vs kỳ trước) -->
						</span>
					</div>
				</div>
			</div>
			<div id="chart-kpi-new-articles" class="chart-sm"></div>
		</div>
	</div>
	<div class="col-sm-6 col-lg-3">
		<div class="card kpi-card">
			<div class="card-body">
				<div class="d-flex align-items-center">
					<div class="subheader">Số Sản Phẩm Mới</div>
				</div>
				<div class="d-flex align-items-baseline">
					<div class="h1 mb-0 me-2 kpi-value" id="kpiNewProductsCount">--</div>
					<div class="ms-auto">
						<span class="text-muted kpi-trend" id="kpiNewProductsTrend">
							<!-- (-5% vs kỳ trước) -->
						</span>
					</div>
				</div>
			</div>
			<div id="chart-kpi-new-products" class="chart-sm"></div>
		</div>
	</div>
	<div class="col-sm-6 col-lg-3">
		<div class="card kpi-card">
			<div class="card-body">
				<div class="d-flex align-items-center">
					<div class="subheader">Số Liên Hệ Mới</div>
				</div>
				<div class="d-flex align-items-baseline">
					<div class="h1 mb-0 me-2 kpi-value" id="kpiNewContactsCount">--</div>
					<div class="ms-auto">
						<span class="text-muted kpi-trend" id="kpiNewContactsTrend">
							<!-- (+20% vs kỳ trước) -->
						</span>
					</div>
				</div>
			</div>
			<div id="chart-kpi-new-contacts" class="chart-sm"></div>
		</div>
	</div>
	<div class="col-sm-6 col-lg-3">
		<div class="card kpi-card">
			<div class="card-body">
				<div class="d-flex align-items-center">
					<div class="subheader">Người Dùng Mới</div>
				</div>
				<div class="d-flex align-items-baseline">
					<div class="h1 mb-0 me-2 kpi-value" id="kpiNewUsersCount">--</div>
					<div class="ms-auto">
						<span class="text-muted kpi-trend" id="kpiNewUsersTrend">
							<!-- (+15% vs kỳ trước) -->
						</span>
					</div>
				</div>
			</div>
			<div id="chart-kpi-new-users" class="chart-sm"></div>
		</div>
	</div>
	<!-- Thêm các thẻ KPI khác nếu có (Doanh thu, Đơn hàng...) -->
</div>

<div class="row mb-3">
	<div class="col-12">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Hoạt Động Theo Thời Gian</h3>
			</div>
			<div class="card-body">
				<div id="chart-activity-overview" style="height: 300px;"></div>
			</div>
		</div>
	</div>
</div>

<!-- II. PHÂN TÍCH NỘI DUNG -->
<div class="page-header mt-4 mb-3">
	<h2 class="page-title">Phân Tích Nội Dung</h2>
</div>
<div class="row row-cards mb-3">
	<!-- A. Bài Viết -->
	<div class="col-lg-6">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Số Bài Viết Xuất Bản</h3>
				<!-- Optional: Filter cho biểu đồ bài viết -->
			</div>
			<div class="card-body">
				<div id="chart-articles-published-time" style="height: 250px;"></div>
			</div>
		</div>
	</div>
	<div class="col-lg-6">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Phân Bổ Bài Viết Theo Danh Mục</h3>
			</div>
			<div class="card-body">
				<div id="chart-articles-by-category" style="height: 250px;"></div>
			</div>
		</div>
	</div>
	<div class="col-lg-6 mt-3">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Top Tác Giả Nhiều Bài Viết</h3>
			</div>
			<div class="card-body">
				<div id="chart-top-authors" style="height: 250px;"></div>
			</div>
		</div>
	</div>
	<div class="col-lg-6 mt-3">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Bài Viết Được Xem Nhiều Nhất</h3>
			</div>
			<div class="table-responsive">
				<table class="table card-table table-vcenter text-nowrap datatable" id="table-top-articles">
					<thead>
						<tr>
							<th>Tiêu đề</th>
							<th>Lượt xem</th>
							<th>Ngày xuất bản</th>
							<th>Danh mục</th>
						</tr>
					</thead>
					<tbody>
						<!-- Dữ liệu sẽ được load bằng JS hoặc Razor -->
					</tbody>
				</table>
			</div>
		</div>
	</div>

	<!-- B. Sản Phẩm -->
	<div class="col-lg-6 mt-3">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Số Sản Phẩm Thêm/Cập Nhật</h3>
			</div>
			<div class="card-body">
				<div id="chart-products-activity-time" style="height: 250px;"></div>
			</div>
		</div>
	</div>
	<div class="col-lg-6 mt-3">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Phân Bổ Sản Phẩm Theo Danh Mục</h3>
			</div>
			<div class="card-body">
				<div id="chart-products-by-category" style="height: 250px;"></div>
			</div>
		</div>
	</div>
	<div class="col-lg-6 mt-3">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Số Lượng Sản Phẩm Theo Thương Hiệu</h3>
			</div>
			<div class="card-body">
				<div id="chart-products-by-brand" style="height: 250px;"></div>
			</div>
		</div>
	</div>
	<div class="col-lg-6 mt-3">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Sản Phẩm Được Xem Nhiều Nhất</h3>
			</div>
			<div class="table-responsive">
				<table class="table card-table table-vcenter text-nowrap datatable" id="table-top-products">
					<thead>
						<tr>
							<th>Tên sản phẩm</th>
							<th>Lượt xem</th>
							<th>Danh mục</th>
							<th>Thương hiệu</th>
						</tr>
					</thead>
					<tbody>
						<!-- Dữ liệu sẽ được load bằng JS hoặc Razor -->
					</tbody>
				</table>
			</div>
		</div>
	</div>
</div>

<!-- III. PHÂN TÍCH TƯƠNG TÁC -->
<div class="page-header mt-4 mb-3">
	<h2 class="page-title">Phân Tích Tương Tác</h2>
</div>
<div class="row row-cards mb-3">
	<!-- A. Liên Hệ -->
	<div class="col-lg-6">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Số Lượng Liên Hệ Mới</h3>
				<!-- Optional: Filter cho trạng thái liên hệ -->
			</div>
			<div class="card-body">
				<div id="chart-new-contacts-time" style="height: 250px;"></div>
			</div>
		</div>
	</div>
	<div class="col-lg-6">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Phân Bổ Trạng Thái Liên Hệ</h3>
			</div>
			<div class="card-body">
				<div id="chart-contact-status-distribution" style="height: 250px;"></div>
			</div>
		</div>
	</div>

	<!-- B. Đăng Ký Newsletter -->
	<div class="col-lg-6 mt-3">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Lượt Đăng Ký Newsletter Mới</h3>
			</div>
			<div class="card-body">
				<div id="chart-newsletter-subscriptions-time" style="height: 250px;"></div>
			</div>
		</div>
	</div>

	<!-- C. Đánh Giá Sản Phẩm / Testimonials -->
	<div class="col-lg-6 mt-3">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Số Lượng Đánh Giá Mới</h3>
			</div>
			<div class="card-body">
				<div id="chart-new-reviews-time" style="height: 250px;"></div> <!-- Kết hợp cả ProductReview và Testimonial hoặc tách ra -->
			</div>
		</div>
	</div>
	<div class="col-lg-6 mt-3">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Phân Bổ Rating Trung Bình</h3>
				<!-- Optional: Filter Top 5 sản phẩm / Danh mục -->
			</div>
			<div class="card-body">
				<div id="chart-average-rating-distribution" style="height: 250px;"></div>
			</div>
		</div>
	</div>
	<div class="col-lg-6 mt-3">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Trạng Thái Duyệt Đánh Giá Sản Phẩm</h3>
			</div>
			<div class="card-body">
				<div id="chart-product-review-status" style="height: 250px;"></div>
			</div>
		</div>
	</div>
</div>

<!-- IV. PHÂN TÍCH NGƯỜI DÙNG -->
<div class="page-header mt-4 mb-3">
	<h2 class="page-title">Phân Tích Người Dùng</h2>
</div>
<div class="row row-cards">
	<div class="col-lg-6">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Người Dùng Đăng Ký Mới</h3>
			</div>
			<div class="card-body">
				<div id="chart-new-registered-users-time" style="height: 250px;"></div>
			</div>
		</div>
	</div>
	<div class="col-lg-6">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Phân Bổ Người Dùng Theo Vai Trò</h3>
			</div>
			<div class="card-body">
				<div id="chart-user-role-distribution" style="height: 250px;"></div>
			</div>
		</div>
	</div>
</div>


@section Scripts {
	<script src="https://cdn.jsdelivr.net/npm/apexcharts"></script>
	<script src="https://cdn.jsdelivr.net/npm/litepicker/dist/litepicker.js"></script> @* Hoặc từ lib của bạn *@
	<script>
		document.addEventListener("DOMContentLoaded", function () {
			// --- I. TỔNG QUAN & KPI CHÍNH ---

			// 1. Bộ lọc thời gian chung
			const dateRangePicker = new Litepicker({
				element: document.getElementById('dashboardDateRangePicker'),
				singleMode: false,
				allowRepick: true,
				autoApply: true, // Tự động áp dụng khi chọn xong
				format: 'DD/MM/YYYY',
				separator: ' - ',
				showTooltip: true,
				numberOfMonths: 2,
				numberOfColumns: 2,
				tooltipText: {
					one: 'ngày',
					other: 'ngày'
				},
				ranges: {
					'Hôm nay': [new Date(), new Date()],
					'7 ngày qua': [new Date(new Date().setDate(new Date().getDate() - 6)), new Date()],
					'30 ngày qua': [new Date(new Date().setDate(new Date().getDate() - 29)), new Date()],
					'Tháng này': [new Date(new Date().getFullYear(), new Date().getMonth(), 1), new Date(new Date().getFullYear(), new Date().getMonth() + 1, 0)],
					'Tháng trước': [new Date(new Date().getFullYear(), new Date().getMonth() - 1, 1), new Date(new Date().getFullYear(), new Date().getMonth(), 0)],
					// Thêm 'Năm nay', 'Năm ngoái' nếu cần
				},
				dropdowns: {
					minYear: 2020,
					maxYear: null,
					months: true,
					years: true
				},
				buttonText: {
					previousMonth: `<svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="15 6 9 12 15 18" /></svg>`,
					nextMonth: `<svg xmlns="http://www.w3.org/2000/svg" class="icon" width="24" height="24" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><polyline points="9 6 15 12 9 18" /></svg>`,
					apply: 'Áp dụng',
					cancel: 'Hủy',
					reset: 'Đặt lại'
				},
				onSelect: function(date1, date2) {
					// Gọi hàm load lại dữ liệu dashboard với date1 và date2
					console.log("Date range selected:", date1.toDateString(), date2.toDateString());
					loadDashboardData(date1, date2);
				}
			});

			// Hàm giả định để load dữ liệu
			function loadDashboardData(startDate, endDate) {
				const startDateString = startDate ? startDate.toISOString().split('T')[0] : null;
				const endDateString = endDate ? endDate.toISOString().split('T')[0] : null;

				console.log(`Fetching data for: ${startDateString} to ${endDateString}`);
				// TODO: Gọi API để lấy dữ liệu mới và cập nhật tất cả các biểu đồ, KPI
				// Ví dụ: fetchKpiData(startDateString, endDateString);
				// Ví dụ: fetchChartActivityOverviewData(startDateString, endDateString);
				// ... và các hàm khác cho từng biểu đồ
			}

			// Load dữ liệu lần đầu (ví dụ: 7 ngày qua)
			const initialEndDate = new Date();
			const initialStartDate = new Date();
			initialStartDate.setDate(initialEndDate.getDate() - 6);
			dateRangePicker.setDateRange(initialStartDate, initialEndDate); // Kích hoạt onSelect
			// loadDashboardData(initialStartDate, initialEndDate); // Hoặc gọi trực tiếp nếu onSelect không tự trigger khi set ban đầu


			// 2. Các Thẻ KPI Chính (Sparkline examples)
			function renderSparkline(elementId, data, color = '#206bc4') {
				new ApexCharts(document.getElementById(elementId), {
					chart: { type: 'line', sparkline: { enabled: true }, height: 50, animations: { enabled: false } },
					series: [{ data: data }],
					stroke: { curve: 'smooth', width: 2 },
					colors: [color],
					tooltip: { enabled: false }
				}).render();
			}

			// Dữ liệu giả cho Sparklines - SẼ ĐƯỢC THAY THẾ BẰNG DỮ LIỆU THẬT TỪ API
			$('#kpiNewArticlesCount').text('150');
			$('#kpiNewArticlesTrend').html('<i class="ti ti-arrow-up"></i> +10% <span class="text-muted">vs kỳ trước</span>').addClass('positive');
			renderSparkline('chart-kpi-new-articles', [10, 15, 12, 18, 10, 20, 16]);

			$('#kpiNewProductsCount').text('50');
			$('#kpiNewProductsTrend').html('<i class="ti ti-arrow-down"></i> -5% <span class="text-muted">vs kỳ trước</span>').addClass('negative');
			renderSparkline('chart-kpi-new-products', [8, 6, 7, 5, 9, 4, 6], '#d63939');

			$('#kpiNewContactsCount').text('75');
			$('#kpiNewContactsTrend').html('<i class="ti ti-arrow-up"></i> +20% <span class="text-muted">vs kỳ trước</span>').addClass('positive');
			renderSparkline('chart-kpi-new-contacts', [5, 8, 6, 10, 7, 12, 9]);

			$('#kpiNewUsersCount').text('30');
			$('#kpiNewUsersTrend').html('<i class="ti ti-arrow-up"></i> +15% <span class="text-muted">vs kỳ trước</span>').addClass('positive');
			renderSparkline('chart-kpi-new-users', [2, 4, 3, 5, 3, 6, 4]);

			// 3. Biểu Đồ Đường Tổng Quan "Hoạt Động Theo Thời Gian"
			// Dữ liệu mẫu - CẦN LẤY TỪ API THEO BỘ LỌC THỜI GIAN
			const activityOverviewData = {
				labels: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'], // Sẽ thay đổi theo bộ lọc
				series: [
					{ name: 'Bài viết mới', data: [10, 15, 12, 18, 10, 20, 16] },
					{ name: 'Sản phẩm mới', data: [8, 6, 7, 5, 9, 4, 6] },
					{ name: 'Liên hệ mới', data: [5, 8, 6, 10, 7, 12, 9] },
					{ name: 'ĐK Newsletter', data: [3, 5, 4, 6, 2, 7, 5] }
				]
			};
			new ApexCharts(document.getElementById('chart-activity-overview'), {
				chart: { type: 'line', height: 300, toolbar: { show: false } },
				series: activityOverviewData.series,
				xaxis: { categories: activityOverviewData.labels },
				stroke: { curve: 'smooth', width: 2 },
				markers: { size: 4 },
				legend: { position: 'top' },
				grid: { borderColor: '#e9ecef' }
			}).render();


			// --- II. PHÂN TÍCH NỘI DUNG ---
			// A. Bài Viết
			// 1. Số Bài Viết Xuất Bản Theo Thời Gian
			new ApexCharts(document.getElementById('chart-articles-published-time'), {
				chart: { type: 'line', height: 250, toolbar: { show: false } },
				series: [{ name: 'Bài viết', data: [5, 8, 12, 10, 15, 13, 18] }], // Dữ liệu mẫu
				xaxis: { categories: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'] },
				stroke: { curve: 'smooth', width: 2 },
			}).render();

			// 2. Phân Bổ Bài Viết Theo Danh Mục (Pie Chart)
			new ApexCharts(document.getElementById('chart-articles-by-category'), {
				chart: { type: 'pie', height: 250 },
				series: [44, 55, 13, 33], // Số lượng bài viết cho mỗi danh mục
				labels: ['Tư vấn', 'Kinh nghiệm', 'Tin tức', 'Khuyến mãi'], // Tên danh mục
				legend: { position: 'bottom' },
				responsive: [{
					breakpoint: 480,
					options: { chart: { width: 200 }, legend: { position: 'bottom' } }
				}]
			}).render();

			// 3. Top Tác Giả (Bar Chart)
			new ApexCharts(document.getElementById('chart-top-authors'), {
				chart: { type: 'bar', height: 250, toolbar: { show: false } },
				series: [{ name: 'Số bài viết', data: [25, 20, 18, 15, 12] }], // Số bài viết
				xaxis: { categories: ['Tác giả A', 'Tác giả B', 'Tác giả C', 'Tác giả D', 'Tác giả E'] }, // Tên tác giả
				plotOptions: { bar: { horizontal: false, columnWidth: '50%' } },
				dataLabels: { enabled: false }
			}).render();

			// 4. Bảng Bài Viết Xem Nhiều (Dữ liệu từ Razor hoặc JS AJAX)
			// Ví dụ: $('#table-top-articles tbody').html('<tr><td>...</td>...</tr>');


			// B. Sản Phẩm
			// 1. Số Sản Phẩm Thêm/Cập Nhật Theo Thời Gian
			new ApexCharts(document.getElementById('chart-products-activity-time'), {
				 chart: { type: 'line', height: 250, toolbar: { show: false } },
				series: [{ name: 'Sản phẩm', data: [10, 12, 8, 15, 7, 11, 9] }],
				xaxis: { categories: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'] },
			}).render();

			// 2. Phân Bổ Sản Phẩm Theo Danh Mục (Donut Chart)
			new ApexCharts(document.getElementById('chart-products-by-category'), {
				chart: { type: 'donut', height: 250 },
				series: [30, 40, 25, 15],
				labels: ['Sơn nội thất', 'Sơn ngoại thất', 'Chống thấm', 'Dụng cụ'],
				legend: { position: 'bottom' }
			}).render();

			// 3. Số Lượng Sản Phẩm Theo Thương Hiệu (Horizontal Bar Chart)
			new ApexCharts(document.getElementById('chart-products-by-brand'), {
				 chart: { type: 'bar', height: 250, toolbar: { show: false } },
				series: [{ name: 'Số sản phẩm', data: [50, 45, 30, 25, 20] }],
				xaxis: { categories: ['Dulux', 'Jotun', 'Kova', 'Sika', 'Nippon'] },
				plotOptions: { bar: { horizontal: true } },
			}).render();

			// 4. Bảng Sản Phẩm Xem Nhiều (Dữ liệu từ Razor hoặc JS AJAX)

			// --- III. PHÂN TÍCH TƯƠNG TÁC ---
			// A. Liên Hệ
			// 1. Số Lượng Liên Hệ Mới Theo Thời Gian
			 new ApexCharts(document.getElementById('chart-new-contacts-time'), {
				chart: { type: 'area', height: 250, toolbar: { show: false } },
				series: [{ name: 'Liên hệ', data: [7, 10, 6, 12, 9, 15, 11] }],
				xaxis: { categories: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'] },
				dataLabels: { enabled: false },
				stroke: { curve: 'smooth' }
			}).render();

			// 2. Phân Bổ Trạng Thái Liên Hệ
			new ApexCharts(document.getElementById('chart-contact-status-distribution'), {
				chart: { type: 'pie', height: 250 },
				series: [60, 20, 15, 5], // Mới, Đang xử lý, Đã giải quyết, Spam
				labels: ['Mới', 'Đang xử lý', 'Đã giải quyết', 'Spam'],
				legend: { position: 'bottom' }
			}).render();

			// B. Đăng Ký Newsletter
			 new ApexCharts(document.getElementById('chart-newsletter-subscriptions-time'), {
				chart: { type: 'line', height: 250, toolbar: { show: false } },
				series: [{ name: 'Đăng ký', data: [4, 6, 3, 8, 5, 9, 7] }],
				xaxis: { categories: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'] },
			}).render();

			// C. Đánh Giá Sản Phẩm / Testimonials
			// 1. Số Lượng Đánh Giá Mới Theo Thời Gian
			new ApexCharts(document.getElementById('chart-new-reviews-time'), {
				chart: { type: 'line', height: 250, toolbar: { show: false } },
				series: [
					{ name: 'Đánh giá SP', data: [3, 5, 2, 6, 4, 7, 5] },
					{ name: 'Testimonials', data: [1, 2, 1, 3, 2, 2, 1] }
				],
				xaxis: { categories: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'] },
			}).render();

			// 2. Phân Bổ Rating Trung Bình (Cần logic phức tạp hơn ở backend để lấy dữ liệu này)
			// Ví dụ cho top 5 sản phẩm
			 new ApexCharts(document.getElementById('chart-average-rating-distribution'), {
				chart: { type: 'bar', height: 250, toolbar: { show: false } },
				series: [{ name: 'Rating TB', data: [4.8, 4.5, 4.2, 3.9, 3.5] }],
				xaxis: { categories: ['Sản phẩm A', 'Sản phẩm B', 'Sản phẩm C', 'Sản phẩm D', 'Sản phẩm E'] },
				plotOptions: { bar: { borderRadius: 4, horizontal: true, } },
				dataLabels: { enabled: true, formatter: function (val) { return val.toFixed(1) + " ★" } }
			}).render();

			// 3. Trạng Thái Duyệt Đánh Giá Sản Phẩm
			new ApexCharts(document.getElementById('chart-product-review-status'), {
				chart: { type: 'donut', height: 250 },
				series: [70, 20, 10], // Approved, Pending, Rejected
				labels: ['Đã duyệt', 'Chờ duyệt', 'Từ chối'],
				legend: { position: 'bottom' }
			}).render();


			// --- IV. PHÂN TÍCH NGƯỜI DÙNG ---
			// 1. Số Lượng Người Dùng Đăng Ký Mới Theo Thời Gian
			new ApexCharts(document.getElementById('chart-new-registered-users-time'), {
				chart: { type: 'line', height: 250, toolbar: { show: false } },
				series: [{ name: 'Người dùng mới', data: [15, 20, 18, 25, 22, 30, 28] }],
				xaxis: { categories: ['T2', 'T3', 'T4', 'T5', 'T6', 'T7', 'CN'] },
			}).render();

			// 2. Phân Bổ Người Dùng Theo Vai Trò
			new ApexCharts(document.getElementById('chart-user-role-distribution'), {
				chart: { type: 'pie', height: 250 },
				series: [5, 20, 75], // SuperAdmin, Admin, User (Ví dụ)
				labels: ['Super Admin', 'Admin', 'User'],
				legend: { position: 'bottom' }
			}).render();

			// Hàm để fetch dữ liệu KPI (ví dụ)
			// async function fetchKpiData(startDate, endDate) {
			//     try {
			//         const response = await fetch(`/Admin/Dashboard/GetKpiData?startDate=${startDate}&endDate=${endDate}`);
			//         if (!response.ok) throw new Error('Network response was not ok');
			//         const data = await response.json();

			//         $('#kpiNewArticlesCount').text(data.newArticles.count);
			//         $('#kpiNewArticlesTrend').html(formatTrend(data.newArticles.trendPercentage, data.newArticles.trendDirection));
			//         renderSparkline('chart-kpi-new-articles', data.newArticles.sparklineData);
			//         // ... cập nhật các KPI khác
			//     } catch (error) {
			//         console.error('Error fetching KPI data:', error);
			//         // Hiển thị lỗi trên UI nếu cần
			//     }
			// }

			// function formatTrend(percentage, direction) {
			//     const icon = direction === 'up' ? '<i class="ti ti-arrow-up"></i>' : direction === 'down' ? '<i class="ti ti-arrow-down"></i>' : '';
			//     const
			//     const trendClass = direction === 'up' ? 'positive' : direction === 'down' ? 'negative' : '';
			//     const trendElement = $(`#kpiNewArticlesTrend`); // Thay bằng ID tương ứng
			//     trendElement.html(`${icon} ${percentage >= 0 ? '+' : ''}${percentage.toFixed(1)}% <span class="text-muted">vs kỳ trước</span>`);
			//     trendElement.removeClass('positive negative').addClass(trendClass);

			// }

			// Gọi hàm fetch dữ liệu cho các biểu đồ khác tương tự...
		});
	</script>
}