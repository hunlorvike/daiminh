@using web.Areas.Admin.ViewModels.Dashboard
@using shared.Enums;
@using shared.Extensions;
@model DashboardViewModel
@{
	ViewData["Title"] = "Bảng điều khiển";
	ViewData["PageTitle"] = "Bảng điều khiển";
	ViewData["Breadcrumbs"] = new List<(string Text, string Url)>();
}

<div class="row row-deck row-cards">
	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="Article" asp-area="Admin">
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-primary text-white avatar"> <i class="ti ti-file-text fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							@Model.TotalPublishedArticles Bài viết
							<span class="text-muted">(@Model.TotalDraftArticles nháp)</span>
						</div>
						<div class="text-muted">
							Quản lý bài viết, tin tức
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="Product" asp-area="Admin">
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-success text-white avatar"> <i class="ti ti-building-store fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							@Model.TotalActiveProducts Sản phẩm
						</div>
						<div class="text-muted">
							Quản lý sản phẩm
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="Category" asp-area="Admin">
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-info text-white avatar"> <i class="ti ti-category-2 fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							@Model.TotalProductCategories DM. Sản phẩm
						</div>
						<div class="text-muted">
							@Model.TotalArticleCategories DM. Bài viết, @Model.TotalFaqCategories DM. FAQ
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="Tag" asp-area="Admin">
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-warning text-white avatar"> <i class="ti ti-tags fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							@Model.TotalProductTags Thẻ SP
						</div>
						<div class="text-muted">
							@Model.TotalArticleTags Thẻ Bài viết
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	@* --- Thống kê tương tác & khác --- *@
	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="Contact" asp-area="Admin">
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-danger text-white avatar"> <i class="ti ti-mail-forward fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							@Model.TotalNewContacts Liên hệ mới
						</div>
						<div class="text-muted">
							Quản lý thư liên hệ
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="Newsletter" asp-area="Admin">
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-purple text-white avatar"> <i class="ti ti-mail-opened fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							@Model.TotalActiveNewsletters Đăng ký nhận tin
						</div>
						<div class="text-muted">
							Quản lý danh sách email
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="Testimonial" asp-area="Admin">
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-teal text-white avatar"> <i class="ti ti-quote fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							@Model.TotalActiveTestimonials Đánh giá
						</div>
						<div class="text-muted">
							Quản lý phản hồi khách hàng
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="Brand" asp-area="Admin">
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-lime text-white avatar"> <i class="ti ti-building-factory-2 fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							@Model.TotalActiveBrands Thương hiệu
						</div>
						<div class="text-muted">
							Quản lý thương hiệu sản phẩm
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="FAQ" asp-area="Admin">
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-indigo text-white avatar"> <i class="ti ti-help-circle fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							@Model.TotalActiveFAQs Câu hỏi FAQ
						</div>
						<div class="text-muted">
							Quản lý câu hỏi thường gặp
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="Media" asp-area="Admin">
			@* Giả sử có MediaController *@
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-orange text-white avatar"> <i class="ti ti-photo fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							Thư viện
						</div>
						<div class="text-muted">
							Quản lý hình ảnh, tệp tin
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="Setting" asp-area="Admin">
			@* Giả sử có SettingController *@
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-secondary text-white avatar"> <i class="ti ti-settings fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							Cấu hình
						</div>
						<div class="text-muted">
							Quản lý cài đặt hệ thống
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	<div class="col-sm-6 col-lg-3">
		<a class="card card-link card-link-pop" asp-action="Index" asp-controller="User" asp-area="Admin">
			<div class="card-body">
				<div class="row align-items-center">
					<div class="col-auto">
						<span class="bg-dark text-white avatar"> <i class="ti ti-users fs-1"></i> </span>
					</div>
					<div class="col">
						<div class="fw-medium">
							@Model.TotalActiveUsers Người dùng
						</div>
						<div class="text-muted">
							Quản lý tài khoản quản trị
						</div>
					</div>
				</div>
			</div>
		</a>
	</div>

	<div class="col-lg-6">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Bài viết gần đây</h3>
			</div>
			<div class="card-body">
				<div class="list-group list-group-flush list-group-hoverable">
					@if (Model.RecentArticles.Any())
					{
						foreach (var article in Model.RecentArticles)
						{
							<div class="list-group-item">
								<div class="row align-items-center">
									<div class="col text-truncate">
										<a asp-action="Edit" asp-controller="Article" asp-route-id="@article.Id" class="text-body d-block">@article.Title</a>
										<div class="text-muted text-truncate mt-n1">
											@article.AuthorName - @article.CreatedAt?.ToString("dd/MM/yyyy HH:mm")
										</div>
									</div>
								</div>
							</div>
						}
					}
					else
					{
						<div class="list-group-item">Chưa có bài viết nào.</div>
					}
				</div>
			</div>
			<div class="card-footer text-end">
				<a asp-action="Index" asp-controller="Article" class="btn btn-sm btn-outline-primary">Xem tất cả bài viết</a>
			</div>
		</div>
	</div>

	<div class="col-lg-6">
		<div class="card">
			<div class="card-header">
				<h3 class="card-title">Liên hệ mới nhất</h3>
			</div>
			<div class="card-body">
				<div class="list-group list-group-flush list-group-hoverable">
					@if (Model.RecentContacts.Any())
					{
						foreach (var contact in Model.RecentContacts)
						{
							<div class="list-group-item">
								<div class="row align-items-center">
									<div class="col text-truncate">
										<a asp-action="Details" asp-controller="Contact" asp-route-id="@contact.Id" class="text-body d-block">@contact.Subject</a>
										<div class="text-muted text-truncate mt-n1">
											Từ: @contact.FullName - @contact.CreatedAt.ToString("dd/MM/yyyy HH:mm")
										</div>
									</div>
								</div>
							</div>
						}
					}
					else
					{
						<div class="list-group-item">Chưa có liên hệ nào mới.</div>
					}
				</div>
			</div>
			<div class="card-footer text-end">
				<a asp-action="Index" asp-controller="Contact" class="btn btn-sm btn-outline-primary">Xem tất cả liên hệ</a>
			</div>
		</div>
	</div>

</div>
