@using shared.Helpers
@using web.Areas.Admin.ViewModels.Product
@model ProductViewModel

@* --- TABS --- *@
<ul class="nav nav-tabs nav-fill mb-3" data-bs-toggle="tabs" role="tablist">
    <li class="nav-item" role="presentation">
        <a href="#tab-basic-info" class="nav-link active" data-bs-toggle="tab" aria-selected="true" role="tab">
            <i class="ti ti-info-circle me-2"></i> Thông tin cơ bản
        </a>
    </li>
    <li class="nav-item" role="presentation">
        <a href="#tab-descriptions" class="nav-link" data-bs-toggle="tab" aria-selected="false" tabindex="-1" role="tab">
            <i class="ti ti-file-text me-2"></i> Mô tả & Chi tiết
        </a>
    </li>
    <li class="nav-item" role="presentation">
        <a href="#tab-images" class="nav-link" data-bs-toggle="tab" aria-selected="false" tabindex="-1" role="tab">
            <i class="ti ti-photo me-2"></i> Hình ảnh
        </a>
    </li>
    <li class="nav-item" role="presentation">
        <a href="#tab-variants" class="nav-link" data-bs-toggle="tab" aria-selected="false" tabindex="-1" role="tab">
            <i class="ti ti-adjustments-alt me-2"></i> Biến thể & Kho
        </a>
    </li>
    <li class="nav-item" role="presentation">
        <a href="#tab-relations" class="nav-link" data-bs-toggle="tab" aria-selected="false" tabindex="-1" role="tab">
            <i class="ti ti-tags me-2"></i> Phân loại
        </a>
    </li>
    <li class="nav-item" role="presentation">
        <a href="#tab-seo" class="nav-link" data-bs-toggle="tab" aria-selected="false" tabindex="-1" role="tab">
            <i class="ti ti-search me-2"></i> Tối ưu SEO
        </a>
    </li>
</ul>

@* --- TAB CONTENT --- *@
<div class="tab-content">
    @* --- Tab: Basic Info --- *@
    <div class="tab-pane active show" id="tab-basic-info" role="tabpanel">
        <div class="row">
            <div class="col-md-8">
                <div class="form-group mb-3">
                    <label asp-for="Name" class="form-label required"></label>
                    <input asp-for="Name" class="form-control" id="productName" /> @* Use ID *@
                    <span asp-validation-for="Name" class="text-danger"></span>
                </div>
                <div class="form-group mb-3">
                    <label asp-for="Slug" class="form-label required"></label>
                    <div class="input-group">
                        <input asp-for="Slug" class="form-control" id="productSlug" /> @* Use ID *@
                        <button class="btn btn-outline-secondary" type="button" id="generateSlugButton"> <i class="ti ti-refresh"></i> </button>
                    </div>
                    <span asp-validation-for="Slug" class="text-danger"></span>
                    <small class="form-hint">Dùng cho URL (chữ thường, số, dấu gạch ngang)</small>
                </div>
                <div class="form-group mb-3">
                    <label asp-for="ShortDescription" class="form-label"></label>
                    <textarea asp-for="ShortDescription" class="form-control" rows="3"></textarea>
                    <span asp-validation-for="ShortDescription" class="text-danger"></span>
                </div>
                <div class="form-group mb-3">
                    <label asp-for="Manufacturer" class="form-label"></label>
                    <input asp-for="Manufacturer" class="form-control" />
                    <span asp-validation-for="Manufacturer" class="text-danger"></span>
                </div>
                <div class="form-group mb-3 mb-md-0">
                    @* Adjust margin *@
                    <label asp-for="Origin" class="form-label"></label>
                    <input asp-for="Origin" class="form-control" />
                    <span asp-validation-for="Origin" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group mb-3">
                    <label asp-for="ProductTypeId" class="form-label required"></label>
                    <select asp-for="ProductTypeId" asp-items="@Model.ProductTypeList" class="form-select tom-select-single" id="ProductTypeId">
                        @* Use TomSelect for single *@
                        <option value="">-- Chọn loại --</option>
                    </select>
                    <span asp-validation-for="ProductTypeId" class="text-danger"></span>
                </div>
                <div class="form-group mb-3">
                    <label asp-for="BrandId" class="form-label"></label>
                    <select asp-for="BrandId" asp-items="@Model.BrandList" class="form-select tom-select-single" id="BrandId">
                        @* Use TomSelect for single *@
                        <option value="">-- Chọn thương hiệu (nếu có) --</option>
                    </select>
                    <span asp-validation-for="BrandId" class="text-danger"></span>
                </div>
                <div class="form-group mb-3">
                    <label asp-for="Status" class="form-label required"></label>
                    <select asp-for="Status" asp-items="@Model.StatusList" class="form-select tom-select-single" id="Status"></select> @* Use TomSelect for single *@
                    <span asp-validation-for="Status" class="text-danger"></span>
                </div>
                <hr class="my-3">
                <div class="form-check form-switch mb-3">
                    <input class="form-check-input" type="checkbox" asp-for="IsActive" role="switch" id="IsActive"> @* Use ID *@
                    <label class="form-check-label" asp-for="IsActive"></label>
                    <span asp-validation-for="IsActive" class="text-danger"></span>
                </div>
                <div class="form-check form-switch mb-0">
                    <input class="form-check-input" type="checkbox" asp-for="IsFeatured" role="switch" id="IsFeatured"> @* Use ID *@
                    <label class="form-check-label" asp-for="IsFeatured"></label>
                    <span asp-validation-for="IsFeatured" class="text-danger"></span>
                </div>
            </div>
        </div>
    </div>

    @* --- Tab: Descriptions --- *@
    <div class="tab-pane" id="tab-descriptions" role="tabpanel">
        <div class="form-group mb-3">
            <label asp-for="Description" class="form-label required"></label>
            <textarea asp-for="Description" class="form-control summernote-editor" rows="15" id="productDescriptionEditor"></textarea> @* Add specific class/ID *@
            <span asp-validation-for="Description" class="text-danger"></span>
        </div>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-3">
                    <label asp-for="Specifications" class="form-label"></label>
                    <textarea asp-for="Specifications" class="form-control summernote-editor" rows="8" id="Specifications"></textarea> @* Add ID *@
                    <span asp-validation-for="Specifications" class="text-danger"></span>
                </div>
                <div class="form-group mb-3">
                    <label asp-for="Features" class="form-label"></label>
                    <textarea asp-for="Features" class="form-control summernote-editor" rows="8" id="Features"></textarea> @* Add ID *@
                    <span asp-validation-for="Features" class="text-danger"></span>
                </div>
                <div class="form-group mb-3 mb-md-0">
                    @* Adjust margin *@
                    <label asp-for="ApplicationAreas" class="form-label"></label>
                    <textarea asp-for="ApplicationAreas" class="form-control" rows="5" id="ApplicationAreas"></textarea> @* Add ID *@
                    <span asp-validation-for="ApplicationAreas" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-3">
                    <label asp-for="Usage" class="form-label"></label>
                    <textarea asp-for="Usage" class="form-control summernote-editor" rows="8" id="Usage"></textarea> @* Add ID *@
                    <span asp-validation-for="Usage" class="text-danger"></span>
                </div>
                <div class="form-group mb-3">
                    <label asp-for="PackagingInfo" class="form-label"></label>
                    <textarea asp-for="PackagingInfo" class="form-control" rows="5" id="PackagingInfo"></textarea> @* Add ID *@
                    <span asp-validation-for="PackagingInfo" class="text-danger"></span>
                </div>
                <div class="form-group mb-3">
                    <label asp-for="StorageInstructions" class="form-label"></label>
                    <textarea asp-for="StorageInstructions" class="form-control" rows="5" id="StorageInstructions"></textarea> @* Add ID *@
                    <span asp-validation-for="StorageInstructions" class="text-danger"></span>
                </div>
                <div class="form-group mb-3">
                    <label asp-for="SafetyInfo" class="form-label"></label>
                    <textarea asp-for="SafetyInfo" class="form-control" rows="5" id="SafetyInfo"></textarea> @* Add ID *@
                    <span asp-validation-for="SafetyInfo" class="text-danger"></span>
                </div>
            </div>
        </div>
        <div class="form-group mb-0">
            @* Adjust margin *@
            <label asp-for="TechnicalDocuments" class="form-label"></label>
            <textarea asp-for="TechnicalDocuments" class="form-control" rows="5" id="TechnicalDocuments"></textarea> @* Add ID *@
            <span asp-validation-for="TechnicalDocuments" class="text-danger"></span>
            <small class="form-hint">Nhập cấu trúc JSON cho các tài liệu liên quan. Ví dụ: [{"name": "TDS", "url": "..."}, {"name": "MSDS", "url": "..."}]</small>
        </div>
    </div>

    @* --- Tab: Images --- *@
    <div class="tab-pane" id="tab-images" role="tabpanel">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="m-0">Quản lý Hình ảnh</h3>
            <button type="button" class="btn btn-outline-primary" id="selectProductImagesBtn">
                <i class="ti ti-photo-plus me-2"></i> Chọn ảnh từ thư viện
            </button>
        </div>
        <span asp-validation-for="Images" class="text-danger d-block mb-2"></span> @* General validation message *@

        <div id="product-image-list" class="row g-3">
            @* JS will render images here using a template *@
            @for (int i = 0; i < Model.Images.Count; i++)
            {
                var imgId = $"image_{i}"; // Base ID for this item
                <div class="col-md-6 col-lg-4 col-xl-3 product-image-item" data-index="@i" data-image-path="@Model.Images[i].ImageUrl">
                    <input type="hidden" asp-for="Images[i].Id" />
                    <input type="hidden" asp-for="Images[i].ImageUrl" class="image-url-input" />
                    <input type="hidden" asp-for="Images[i].ThumbnailUrl" class="thumb-url-input" />
                    <input type="hidden" asp-for="Images[i].IsDeleted" class="is-deleted-input" value="false" />
                    <div class="card">
                        <div class="img-responsive img-responsive-16x9 card-img-top image-preview"
                             style="background-image: url(@MediaUrlHelper.GetMinioUrl(Model.Images[i].ThumbnailUrl ?? Model.Images[i].ImageUrl, "/img/placeholder.svg"))"></div>
                        <div class="card-body">
                            <div class="form-group mb-2">
                                <label asp-for="Images[i].AltText" class="form-label form-label-sm"></label>
                                <input asp-for="Images[i].AltText" class="form-control form-control-sm" id="@($"{imgId}_AltText")" />
                                <span asp-validation-for="Images[i].AltText" class="text-danger"></span>
                            </div>
                            <div class="form-group mb-2">
                                <label asp-for="Images[i].Title" class="form-label form-label-sm"></label>
                                <input asp-for="Images[i].Title" class="form-control form-control-sm" id="@($"{imgId}_Title")" />
                                <span asp-validation-for="Images[i].Title" class="text-danger"></span>
                            </div>
                            <div class="row g-2 align-items-center">
                                <div class="col">
                                    <div class="form-check form-switch">
                                        @* Use unique name per item for radio group behavior within the item *@
                                        <input class="form-check-input is-main-input" type="radio" name="ImagesMainRadio" id="@($"{imgId}_IsMain")" value="@i" checked="@Model.Images[i].IsMain">
                                        <input type="hidden" asp-for="Images[i].IsMain" class="is-main-hidden" />
                                        <label class="form-check-label form-label-sm" asp-for="Images[i].IsMain" for="@($"{imgId}_IsMain")"></label>
                                    </div>
                                </div>
                                <div class="col-auto">
                                    <input type="number" asp-for="Images[i].OrderIndex" class="form-control form-control-sm order-index-input" style="width: 60px;" title="Thứ tự" min="0" id="@($"{imgId}_OrderIndex")" />
                                    <span asp-validation-for="Images[i].OrderIndex" class="text-danger"></span>
                                </div>
                                <div class="col-auto">
                                    <button type="button" class="btn btn-sm btn-outline-danger remove-image-btn" title="Gỡ ảnh này"><i class="ti ti-trash"></i></button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>

        @* Template for NEWLY SELECTED images (hidden) *@
        <template id="product-image-template">
            <div class="col-md-6 col-lg-4 col-xl-3 product-image-item" data-index="__INDEX__" data-image-path="__IMAGE_PATH__">
                <input type="hidden" name="Images[__INDEX__].Id" value="0" />
                <input type="hidden" name="Images[__INDEX__].ImageUrl" class="image-url-input" value="__IMAGE_PATH__" />
                <input type="hidden" name="Images[__INDEX__].ThumbnailUrl" class="thumb-url-input" value="__THUMB_PATH__" />
                <input type="hidden" name="Images[__INDEX__].IsDeleted" class="is-deleted-input" value="false" />
                <div class="card">
                    <div class="img-responsive img-responsive-16x9 card-img-top image-preview" style="background-image: url(__DISPLAY_URL__)"></div>
                    <div class="card-body">
                        <div class="form-group mb-2">
                            <label name="Images[__INDEX__].AltText" class="form-label form-label-sm">Alt Text</label>
                            <input name="Images[__INDEX__].AltText" class="form-control form-control-sm" id="Images___INDEX___AltText" value="__ALT_TEXT__" />
                        </div>
                        <div class="form-group mb-2">
                            <label name="Images[__INDEX__].Title" class="form-label form-label-sm">Title</label>
                            <input name="Images[__INDEX__].Title" class="form-control form-control-sm" id="Images___INDEX___Title" />
                        </div>
                        <div class="row g-2 align-items-center">
                            <div class="col">
                                <div class="form-check form-switch">
                                    <input class="form-check-input is-main-input" type="radio" name="ImagesMainRadio" id="Images___INDEX___IsMain" value="__INDEX__">
                                    <input type="hidden" name="Images[__INDEX__].IsMain" class="is-main-hidden" value="false" />
                                    <label class="form-check-label form-label-sm" for="Images___INDEX___IsMain">Ảnh chính</label>
                                </div>
                            </div>
                            <div class="col-auto">
                                <input type="number" name="Images[__INDEX__].OrderIndex" class="form-control form-control-sm order-index-input" value="0" style="width: 60px;" title="Thứ tự" min="0" id="Images___INDEX___OrderIndex" />
                            </div>
                            <div class="col-auto">
                                <button type="button" class="btn btn-sm btn-outline-danger remove-image-btn" title="Gỡ ảnh này"><i class="ti ti-trash"></i></button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>
    </div>

    @* --- Tab: Variants --- *@
    <div class="tab-pane" id="tab-variants" role="tabpanel">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h3 class="m-0">Biến thể & Kho hàng</h3>
            <button type="button" class="btn btn-outline-primary" id="add-variant-btn">
                <i class="ti ti-plus me-1"></i> Thêm biến thể
            </button>
        </div>
        <span asp-validation-for="Variants" class="text-danger d-block mb-2"></span>

        <div id="product-variant-list">
            @* JS will render variants here using a template *@
            @for (int i = 0; i < Model.Variants.Count; i++)
            {
                var varId = $"variant_{i}"; // Base ID
                <div class="card mb-3 product-variant-item" data-index="@i">
                    <input type="hidden" asp-for="Variants[i].Id" />
                    <input type="hidden" asp-for="Variants[i].IsDeleted" class="is-deleted-input" value="false" />
                    <div class="card-body">
                        <div class="row g-3">
                            <div class="col-md-4">
                                <label asp-for="Variants[i].Name" class="form-label required"></label>
                                <input asp-for="Variants[i].Name" class="form-control" id="@($"{varId}_Name")" />
                                <span asp-validation-for="Variants[i].Name" class="text-danger"></span>
                            </div>
                            <div class="col-md-3">
                                <label asp-for="Variants[i].Sku" class="form-label required"></label>
                                <input asp-for="Variants[i].Sku" class="form-control" id="@($"{varId}_Sku")" />
                                <span asp-validation-for="Variants[i].Sku" class="text-danger"></span>
                            </div>
                            <div class="col-md-2">
                                <label asp-for="Variants[i].Price" class="form-label required"></label>
                                <input type="number" asp-for="Variants[i].Price" class="form-control" step="any" min="0" id="@($"{varId}_Price")" />
                                <span asp-validation-for="Variants[i].Price" class="text-danger"></span>
                            </div>
                            <div class="col-md-2">
                                <label asp-for="Variants[i].StockQuantity" class="form-label"></label>
                                <input type="number" asp-for="Variants[i].StockQuantity" class="form-control" min="0" id="@($"{varId}_StockQuantity")" />
                                <span asp-validation-for="Variants[i].StockQuantity" class="text-danger"></span>
                            </div>
                            <div class="col-md-1 d-flex align-items-end">
                                <button type="button" class="btn btn-outline-danger remove-variant-btn" title="Xóa biến thể này"><i class="ti ti-trash"></i></button>
                            </div>
                            <div class="col-md-3">
                                <label asp-for="Variants[i].Color" class="form-label"></label>
                                <input asp-for="Variants[i].Color" class="form-control" id="@($"{varId}_Color")" />
                                <span asp-validation-for="Variants[i].Color" class="text-danger"></span>
                            </div>
                            <div class="col-md-3">
                                <label asp-for="Variants[i].Size" class="form-label"></label>
                                <input asp-for="Variants[i].Size" class="form-control" id="@($"{varId}_Size")" />
                                <span asp-validation-for="Variants[i].Size" class="text-danger"></span>
                            </div>
                            <div class="col-md-3">
                                <label asp-for="Variants[i].Packaging" class="form-label"></label>
                                <input asp-for="Variants[i].Packaging" class="form-control" id="@($"{varId}_Packaging")" />
                                <span asp-validation-for="Variants[i].Packaging" class="text-danger"></span>
                            </div>
                            <div class="col-md-3 d-flex align-items-center">
                                <div class="form-check form-switch mt-3">
                                    @* Add margin top for alignment *@
                                    <input class="form-check-input" type="checkbox" asp-for="Variants[i].IsActive" role="switch" id="@($"{varId}_IsActive")">
                                    <label class="form-check-label" asp-for="Variants[i].IsActive"></label>
                                    <span asp-validation-for="Variants[i].IsActive" class="text-danger"></span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            }
        </div>

        @* Template for new variants (hidden) *@
        <template id="product-variant-template">
            <div class="card mb-3 product-variant-item" data-index="__INDEX__">
                <input type="hidden" name="Variants[__INDEX__].Id" value="0" />
                <input type="hidden" name="Variants[__INDEX__].IsDeleted" class="is-deleted-input" value="false" />
                <div class="card-body">
                    <div class="row g-3">
                        <div class="col-md-4"><label name="Variants[__INDEX__].Name" class="form-label required">Tên biến thể</label><input name="Variants[__INDEX__].Name" class="form-control" id="Variants___INDEX___Name" /></div>
                        <div class="col-md-3"><label name="Variants[__INDEX__].Sku" class="form-label required">SKU</label><input name="Variants[__INDEX__].Sku" class="form-control" id="Variants___INDEX___Sku" /></div>
                        <div class="col-md-2"><label name="Variants[__INDEX__].Price" class="form-label required">Giá</label><input type="number" name="Variants[__INDEX__].Price" class="form-control" step="any" min="0" value="0" id="Variants___INDEX___Price" /></div>
                        <div class="col-md-2"><label name="Variants[__INDEX__].StockQuantity" class="form-label">Tồn kho</label><input type="number" name="Variants[__INDEX__].StockQuantity" class="form-control" min="0" value="0" id="Variants___INDEX___StockQuantity" /></div>
                        <div class="col-md-1 d-flex align-items-end"><button type="button" class="btn btn-outline-danger remove-variant-btn" title="Xóa biến thể này"><i class="ti ti-trash"></i></button></div>
                        <div class="col-md-3"><label name="Variants[__INDEX__].Color" class="form-label">Màu sắc</label><input name="Variants[__INDEX__].Color" class="form-control" id="Variants___INDEX___Color" /></div>
                        <div class="col-md-3"><label name="Variants[__INDEX__].Size" class="form-label">Kích thước/Dung tích</label><input name="Variants[__INDEX__].Size" class="form-control" id="Variants___INDEX___Size" /></div>
                        <div class="col-md-3"><label name="Variants[__INDEX__].Packaging" class="form-label">Đóng gói</label><input name="Variants[__INDEX__].Packaging" class="form-control" id="Variants___INDEX___Packaging" /></div>
                        <div class="col-md-3 d-flex align-items-center">
                            <div class="form-check form-switch mt-3">
                                <input class="form-check-input" type="checkbox" name="Variants[__INDEX__].IsActive" value="true" role="switch" id="Variants___INDEX___IsActive" checked>
                                <label class="form-check-label" for="Variants___INDEX___IsActive">Hoạt động</label>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </template>
    </div>

    @* --- Tab: Relations (Categories & Tags) --- *@
    <div class="tab-pane" id="tab-relations" role="tabpanel">
        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-3">
                    <label asp-for="CategoryId" class="form-label required"></label>
                    <select asp-for="CategoryId" asp-items="@Model.CategoryList" class="form-select"></select>
					<span asp-validation-for="CategoryId" class="text-danger"></span>
                    <small class="form-hint">Chọn một hoặc nhiều danh mục.</small>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-3">
                    <label asp-for="SelectedTagIds" class="form-label"></label>
                    <select asp-for="SelectedTagIds" asp-items="@Model.TagList" class="form-select tom-select-multiple" multiple="multiple" id="SelectedTagIds"></select> @* Use TomSelect *@
                    <span asp-validation-for="SelectedTagIds" class="text-danger"></span>
                    <small class="form-hint">Chọn các thẻ liên quan.</small>
                </div>
            </div>
        </div>
    </div>

    @* --- Tab: SEO --- *@
    <div class="tab-pane" id="tab-seo" role="tabpanel">
        <h3 class="card-title mb-3">Tối ưu SEO</h3>
        <div class="form-group mb-3">
            <label asp-for="MetaTitle" class="form-label"></label>
            <input asp-for="MetaTitle" class="form-control" />
            <span asp-validation-for="MetaTitle" class="text-danger"></span>
            <small class="form-hint">Tiêu đề hiển thị trên kết quả tìm kiếm (tối ưu < 60 ký tự).</small>
        </div>
        <div class="form-group mb-3">
            <label asp-for="MetaDescription" class="form-label"></label>
            <textarea asp-for="MetaDescription" class="form-control" rows="3"></textarea>
            <span asp-validation-for="MetaDescription" class="text-danger"></span>
            <small class="form-hint">Mô tả ngắn gọn hiển thị trên kết quả tìm kiếm (tối ưu < 160 ký tự).</small>
        </div>
        <div class="form-group mb-3">
            <label asp-for="MetaKeywords" class="form-label"></label>
            <input asp-for="MetaKeywords" class="form-control" />
            <span asp-validation-for="MetaKeywords" class="text-danger"></span>
            <small class="form-hint">Các từ khóa liên quan, cách nhau bởi dấu phẩy (,).</small>
        </div>
        <hr class="my-3" />
        <div class="form-group mb-3">
            <label asp-for="CanonicalUrl" class="form-label"></label>
            <input asp-for="CanonicalUrl" class="form-control" type="url" />
            <span asp-validation-for="CanonicalUrl" class="text-danger"></span>
            <small class="form-hint">URL chuẩn cho trang này nếu có nội dung trùng lặp.</small>
        </div>
        <div class="row mb-3">
            <div class="col-auto">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" asp-for="NoIndex" role="switch" id="seoNoIndexSwitch">
                    <label class="form-check-label" asp-for="NoIndex"></label>
                </div>
                <small class="form-hint d-block ms-4 ps-2">Ngăn máy tìm kiếm index trang này.</small>
            </div>
            <div class="col-auto">
                <div class="form-check form-switch">
                    <input class="form-check-input" type="checkbox" asp-for="NoFollow" role="switch" id="seoNoFollowSwitch">
                    <label class="form-check-label" asp-for="NoFollow"></label>
                </div>
                <small class="form-hint d-block ms-4 ps-2">Ngăn máy tìm kiếm theo các liên kết trên trang.</small>
            </div>
        </div>
        <hr class="my-3" />
        <h4 class="mb-3">Open Graph (Mạng xã hội)</h4>
        <div class="form-group mb-3">
            <label asp-for="OgTitle" class="form-label"></label>
            <input asp-for="OgTitle" class="form-control" />
            <span asp-validation-for="OgTitle" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="OgDescription" class="form-label"></label>
            <textarea asp-for="OgDescription" class="form-control" rows="2"></textarea>
            <span asp-validation-for="OgDescription" class="text-danger"></span>
        </div>
        <div class="form-group mb-3">
            <label asp-for="OgImage" class="form-label"></label>
            <div class="input-group">
                <input type="text" asp-for="OgImage" class="form-control" id="ogImagePathInput" /> @* Stores URL *@
                <button class="btn btn-outline-secondary" type="button" id="selectOgImageBtn" title="Chọn ảnh từ thư viện"> <i class="ti ti-photo-search"></i> </button>
                <button class="btn btn-outline-danger @(string.IsNullOrEmpty(Model.OgImage) ? "d-none" : "")" type="button" id="removeOgImageBtn" title="Xóa ảnh"> <i class="ti ti-x"></i> </button>
            </div>
            <span asp-validation-for="OgImage" class="text-danger"></span>
            <img id="ogImagePreview" src="@(Model.OgImage ?? "/img/placeholder.svg")" class="img-thumbnail mt-2" style="max-height: 80px; display: @(string.IsNullOrEmpty(Model.OgImage) ? "none" : "block");" />
        </div>
        <div class="form-group mb-3">
            <label asp-for="OgType" class="form-label"></label>
            <input asp-for="OgType" class="form-control" />
            <span asp-validation-for="OgType" class="text-danger"></span>
        </div>
        <hr class="my-3" />
        <h4 class="mb-3">Twitter Card</h4>
        @* Add Twitter fields similarly *@
        <hr class="my-3" />
        <h4 class="mb-3">Dữ liệu cấu trúc (Schema & Breadcrumbs)</h4>
        @* Add Schema/Breadcrumb fields similarly *@
        <hr class="my-3" />
        <h4 class="mb-3">Cấu hình Sitemap</h4>
        <div class="row">
            <div class="col-md-6">
                <div class="form-group mb-3">
                    <label asp-for="SitemapPriority" class="form-label"></label>
                    <input type="number" asp-for="SitemapPriority" class="form-control" step="0.1" min="0.0" max="1.0" />
                    <span asp-validation-for="SitemapPriority" class="text-danger"></span>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group mb-3">
                    <label asp-for="SitemapChangeFrequency" class="form-label required"></label>
                    <select asp-for="SitemapChangeFrequency" class="form-select tom-select-single">
                        @* Use TomSelect *@
                        <option value="">-- Chọn tần suất --</option>
                        <option value="always">Luôn luôn (Always)</option>
                        <option value="hourly">Hàng giờ (Hourly)</option>
                        <option value="daily">Hàng ngày (Daily)</option>
                        <option value="weekly">Hàng tuần (Weekly)</option>
                        <option value="monthly">Hàng tháng (Monthly)</option>
                        <option value="yearly">Hàng năm (Yearly)</option>
                        <option value="never">Không bao giờ (Never)</option>
                    </select>
                    <span asp-validation-for="SitemapChangeFrequency" class="text-danger"></span>
                </div>
            </div>
        </div>
    </div>
</div>